const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),o=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==o.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const headerLang=document.querySelector(".header__lang");body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});t(".header__lang--target")?headerLang.classList.toggle("_active"):t(".header__lang")||document.querySelector(".header__lang._active")&&document.querySelector(".header__lang._active").classList.remove("_active");const o=t(".cookies-message__preferences a");if(o){e.preventDefault();const t=o.closest(".cookies-message");t.classList.add("_hidden"),setTimeout(()=>{t.remove()},1e3)}}));let resizeCheck={},windowSize=0;const wrapper2=document.querySelector(".wrapper");function resizeCheckFunc(e,t,o){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,o()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}const headerNavList=document.querySelector(".header__lang--list"),aside=document.querySelector(".aside");let portfolioMinGallery,contactsBlock;function resize(){if(html.style.setProperty("--height-header",header.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),headerNavList){headerNavList.parentElement.style.setProperty("--list-size",headerNavList.offsetHeight+"px")}windowSize=window.innerWidth,resizeCheckFunc(992,(function(){document.querySelector(".portfolio-page__min-gallery")&&(portfolioMinGallery&&portfolioMinGallery.destroy(!0,!0),portfolioMinGallery=new Swiper(".portfolio-page__min-gallery",{speed:500,effect:"fade",navigation:{nextEl:".portfolio-page__min-gallery--arrow.swiper-button-next",prevEl:".portfolio-page__min-gallery--arrow.swiper-button-prev"},on:{init:function(){setTimeout(()=>{portfolioMinGallery.isEnd&&document.querySelector(".portfolio-page__min-gallery").classList.add("hide-arrows")},300)}}})),document.querySelector(".contacts__block")&&(contactsBlock=new Swiper(".contacts__block",{slidesPerView:"auto"}))}),(function(){document.querySelector(".portfolio-page__min-gallery")&&(portfolioMinGallery&&portfolioMinGallery.destroy(!0,!0),portfolioMinGallery=new Swiper(".portfolio-page__min-gallery",{speed:500,effect:"coverflow",slidesPerView:"auto",direction:"vertical",centeredSlides:!0,on:{init:function(){setTimeout(()=>{portfolioMinGallery.isEnd&&document.querySelector(".portfolio-page__min-gallery").classList.add("hide-arrows")},300)}},coverflowEffect:{rotate:0,scale:1,stretch:40,depth:100,modifier:3,slideShadows:!1}})),document.querySelector(".contacts__block")&&contactsBlock&&contactsBlock.destroy(!0,!0)}))}if(wrapper2&&setInterval(()=>{html.style.setProperty("--wrapper-height",wrapper2.offsetHeight+"px")},100),resize(),window.addEventListener("resize",resize),document.querySelector(".hero__slider")){const e=document.querySelector("#portfolio-project-popup"),t=document.querySelector(".hero__open-project--link:not(.open-popup)"),o=document.querySelector(".hero__name span"),i=document.querySelector(".hero-bg"),r=new Swiper(".hero__slider",{speed:1e3,navigation:{nextEl:".hero__slider--arrow.swiper-button-next",prevEl:".hero__slider--arrow.swiper-button-prev"},loop:!0,initialSlide:localStorage.getItem("deniel-sonis-portfolio-slide-index")?Number(localStorage.getItem("deniel-sonis-portfolio-slide-index")):0,centeredSlides:!0,effect:"coverflow",slidesPerView:"auto",on:{slideChangeTransitionEnd:function(){document.querySelector(".hero__slider").classList.add("drag-active")},slideChange:function(){setTimeout(()=>{e.style.setProperty("--theme",r.slides[r.activeIndex].dataset.theme);const s=r.slides[r.activeIndex].querySelector("picture").cloneNode(!0,!0),n=e.querySelector(".portfolio-project__image");n.querySelector("picture").remove(),n.append(s),t.setAttribute("href",r.slides[r.activeIndex].dataset.url),html.style.setProperty("--theme-accent",r.slides[r.activeIndex].dataset.themeColor),localStorage.setItem("deniel-sonis-theme-accent",r.slides[r.activeIndex].dataset.themeColor),o.querySelectorAll("mark").forEach((e,t)=>{e.classList.remove("active"),t==r.slides[r.activeIndex].dataset.index&&e.classList.add("active")}),i.querySelectorAll(".hero-bg__item").forEach((e,t)=>{e.classList.remove("_active")}),i.querySelectorAll(".hero-bg__item")[Number(r.slides[r.activeIndex].dataset.index)].classList.add("_active"),html.style.setProperty("--theme-gradient",r.slides[r.activeIndex].dataset.themeBg),localStorage.setItem("deniel-sonis-theme-bg",r.slides[r.activeIndex].dataset.themeBg),localStorage.setItem("deniel-sonis-portfolio-slide-index",Number(r.slides[r.activeIndex].dataset.swiperSlideIndex))},400)},init:function(){setTimeout(()=>{t.setAttribute("href",r.slides[r.activeIndex].dataset.url),i.innerHTML="";for(let e=0;e<r.slides.length;e++){r.slides[e].dataset.themeBg?i.insertAdjacentHTML("beforeend",`<div class="hero-bg__item" style="--theme: ${r.slides[e].dataset.themeBg}"></div>`):i.insertAdjacentHTML("beforeend",'<div class="hero-bg__item"></div>');const t=o.querySelector("mark").cloneNode(!0);t.style.setProperty("--theme",r.slides[e].dataset.themeText),t.setAttribute("data-index",e),0==e&&(o.innerHTML=""),o.append(t)}Array.from(r.slides).forEach((e,t)=>{e.setAttribute("data-index",t)}),r.slides.length<=1&&document.querySelector(".hero__slider").classList.add("drag-active")},300)}},coverflowEffect:{rotate:0,scale:1,stretch:0,depth:200,modifier:2,slideShadows:!1},breakpoints:{992:{coverflowEffect:{rotate:-20,scale:.9,stretch:0,depth:300,modifier:2,slideShadows:!1}}}});console.log(Number(localStorage.getItem("deniel-sonis-portfolio-slide-index")))}if(document.querySelector(".mob-portfolio__slider")){const e=new Swiper(".mob-portfolio__slider",{speed:1e3,loop:!1,effect:"coverflow",slidesPerView:"auto",direction:"vertical",on:{activeIndexChange:function(){setTimeout(()=>{e.el.classList.add("drag-active")},500)},init:function(){setTimeout(()=>{e.slides.length<=1&&document.querySelector(".mob-portfolio__slider").classList.add("drag-active")},300)}},coverflowEffect:{rotate:0,scale:1,stretch:30,depth:100,modifier:3,slideShadows:!1}})}if(document.querySelector(".portfolio__categories")){const e=new Swiper(".portfolio__categories--slider",{speed:500,slidesPerView:"auto",navigation:{nextEl:".portfolio__categories--arrow.swiper-button-next",prevEl:".portfolio__categories--arrow.swiper-button-prev"},on:{init:function(){setTimeout(()=>{e.isEnd&&document.querySelector(".portfolio__categories").classList.add("hide-arrows")},300)}}})}if(document.querySelector(".portfolio-page__gallery")&&document.querySelector(".portfolio-page__gallery-nav")){const e=new Swiper(".portfolio-page__gallery-nav",{speed:500,slidesPerView:4,spaceBetween:31}),t=new Swiper(".portfolio-page__gallery",{speed:500,effect:"fade",watchSlidesProgress:!0,on:{activeIndexChange:function(){setTimeout(()=>{t.el.classList.add("drag-active")},500)},init:function(){setTimeout(()=>{t.slides.length<=1&&t.el.classList.add("drag-active")},300)}},thumbs:{swiper:e}})}function Popup(e){let t=document.querySelector("body"),o=document.querySelector("html"),i="object"==typeof e&&!!e.saveHref,r=!0,s=!0;const n=function(e,s){if(r){r=!1;let n=document.querySelector(e);if(!n)return new Error(`Not found "${e}"`);n.classList.contains("popup")&&(t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),i&&history.pushState("","",e),setTimeout(()=>{if(s)n.classList.add("_transition-none"),n.classList.add("_active"),r=!0;else{n.classList.add("_active"),n.addEventListener("transitionend",(function e(){r=!0,setTimeout(()=>{n.classList.add("_active-end")},0),n.removeEventListener("transitionend",e)}))}},100))}},l=function(e){if(s){let r;s=!1,r="string"==typeof e?document.querySelector(e):e.closest(".popup"),r.classList.contains("_transition-none")&&r.classList.remove("_transition-none"),setTimeout(()=>{r.classList.remove("_active"),r.addEventListener("transitionend",(function e(){r.classList.remove("_active-end");const n=document.querySelectorAll(".popup._active");n.length<1&&(t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding","0px")),i&&(!function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}(),n[n.length-1]&&history.pushState("","","#"+n[n.length-1].getAttribute("id"))),s=!0,r.removeEventListener("transitionend",e)}))},0)}};return{open:function(e){n(e)},close:function(e){l(e)},init:function(){let e;if(t.addEventListener("click",(function(t){e=t.target;let o=e.closest(".open-popup");o&&(t.preventDefault(),n(o.getAttribute("href")));let i=e.closest(".popup-close");i&&l(i)})),i){let e=new URL(window.location);e.hash&&n(e.hash,!0)}}}}const popup=new Popup;popup.init(),AOS.init({disable:"mobile",once:!0});const matchMedia=gsap.matchMedia();matchMedia.add("(min-width: 992px)",()=>{const e=document.querySelectorAll(".portfolio__card");document.querySelector(".portfolio__list")&&(document.querySelector(".portfolio__list").style.setProperty("--padding-bottom",document.querySelector(".portfolio__block").offsetHeight-e[e.length-1].offsetHeight-50+"px"),window.addEventListener("resize",(function(){document.querySelector(".portfolio__list").style.setProperty("--padding-bottom",document.querySelector(".portfolio__block").offsetHeight-e[e.length-1].offsetHeight-50+"px")}))),e.forEach((e,t)=>{gsap.set(e,{opacity:0,transform:"translate3d(0,0,-10px) rotateX(-2deg)"});const o=gsap.timeline({scrollTrigger:{trigger:e,scroller:".portfolio__block",start:`${.2*window.innerHeight} ${.797*window.innerHeight}`,end:`${.8*window.innerHeight} ${.27*window.innerHeight}`,scrub:!0}});console.log(1.4*e.offsetHeight+" "+.8*window.innerHeight),o.to(e,{transform:"translate3d(0,0,0) rotateX(0deg)",opacity:1}),o.to(e,{transform:"translate3d(0,0,-10px) rotateX(2deg)",opacity:0})})});